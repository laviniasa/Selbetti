<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema de Gestão de Estoque de Papel e Toner">
    <meta name="keywords" content="estoque, papel, toner, gestão">
    <title>Gestão de Estoque de Papel e Toner</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<center><h3>Gestão de Estoque de Papel e Toner</h3></center>

<!-- Seção de Boas-Vindas e Logout -->
<section class="logout-section">
    <a href="{{ url_for('logout') }}" class="btn">Sair</a>
    <a href="{{ url_for('solicitacoes') }}" class="btn" style="margin-left: 10px;">Solicitações</a>
</section>

<!-- Estoque de Papel Total -->
<section class="estoque-info">
    <p><strong>Estoque total de Papel:</strong> <span>{{ estoque_papel }}</span></p>
</section>

<!-- Formulários: Adicionar e Retirar Papel e Toner -->
<section class="form-section">

    <!-- Adicionar Papel -->
    <div class="form-container">
        <h3>Adicionar Resmas de Papel</h3>
        <form method="POST" action="{{ url_for('adicionar_papel') }}">
            <label for="quantidade">Quantidade de Resmas:</label>
            <input type="number" name="quantidade" id="quantidade" required>
            <button type="submit" class="btn">Adicionar Papel</button>
        </form>
    </div>

    <!-- Retirar Papel -->
    <div class="form-container">
        <h3>Retirar Resmas de Papel</h3>
        <form method="POST" action="{{ url_for('retirar_papel') }}">
            <label for="quantidade">Quantidade de Resmas:</label>
            <input type="number" name="quantidade" id="quantidade" required>
            <label for="local">Local:</label>
            <input type="text" name="local" id="local" required>
            <button type="submit" class="btn">Retirar Papel</button>
        </form>
    </div>

</section>

<section class="form-section">

    <!-- Adicionar Toner -->
    <div class="form-container">
        <h3>Adicionar Toner</h3>
        <form method="POST" action="{{ url_for('adicionar_toner') }}">
            <label for="marca">Marca:</label>
            <input type="text" name="marca" id="marca" required>
            <label for="tipo">Tipo:</label>
            <input type="text" name="tipo" id="tipo" required>
            <label for="quantidade">Quantidade:</label>
            <input type="number" name="quantidade" id="quantidade" required>
            <label for="validade">Validade:</label>
            <input type="date" name="validade" id="validade" required>
            <button type="submit" class="btn">Adicionar Toner</button>
        </form>
    </div>

    <!-- Retirar Toner e Visualizar Toners -->
    <div class="form-container">
        <h3>Retirar Toner</h3>
        <form method="POST" action="{{ url_for('retirar_toner') }}">
            <label for="marca">Marca:</label>
            <input type="text" name="marca" id="marca" required>
            <label for="tipo">Tipo:</label>
            <input type="text" name="tipo" id="tipo" required>
            <label for="quantidade">Quantidade:</label>
            <input type="number" name="quantidade" id="quantidade" required>
            <label for="local">Local:</label>
            <input type="text" name="local" id="local" required>
            <button type="submit" class="btn">Retirar Toner</button>
        </form>

        <!-- Botão para visualizar toners -->
        <div class="button-container">
            <button id="btnVisualizarToners" class="btn">Visualizar Toners</button>
        </div>
    </div>

</section>

<!-- Histórico de Retiradas -->
<section>
    <h3>Histórico de Retiradas de Papel</h3>
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Quantidade</th>
                <th>Local</th>
            </tr>
        </thead>
        <tbody>
            {% for registro in registros_papel %}
                <tr>
                    <td>{{ registro['data'] }}</td>
                    <td>{{ registro['quantidade'] }}</td>
                    <td>{{ registro['local'] }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3>Histórico de Retiradas de Toner</h3>
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Marca</th>
                <th>Tipo</th>
                <th>Quantidade</th>
                <th>Local</th>
            </tr>
        </thead>
        <tbody>
            {% for registro in registros_toner %}
                <tr>
                    <td>{{ registro['data'] }}</td>
                    <td>{{ registro['marca'] }}</td>
                    <td>{{ registro['tipo'] }}</td>
                    <td>{{ registro['quantidade'] }}</td>
                    <td>{{ registro['local'] }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<!-- Modal para Visualizar Toners Disponíveis -->
<div id="tonerModal">
    <div class="modal-content">
        <h3>Toners Disponíveis</h3>
        <ul id="tonerList">
            {% for marca, tipos in estoque_toner.items() %}
                {% for tipo, dados in tipos.items() %}
                    <li><strong>Marca:</strong> {{ marca }} | <strong>Tipo:</strong> {{ tipo }} | <strong>Quantidade:</strong> {{ dados['quantidade'] }} | <strong>Validade:</strong> {{ dados['validade'] }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
        <button onclick="closeModal()" class="btn close-btn">Fechar</button>
    </div>
</div>

<script>
    // Função para abrir o modal
    document.getElementById('btnVisualizarToners').addEventListener('click', function() {
        document.getElementById('tonerModal').style.display = 'flex';
    });

    // Função para fechar o modal
    function closeModal() {
        document.getElementById('tonerModal').style.display = 'none';
    }

    // Fechar o modal ao clicar fora dele
    window.addEventListener('click', function(event) {
        if (event.target === document.getElementById('tonerModal')) {
            closeModal();
        }
    });
</script>

</body>
</html>
